<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Making your first Phaser 3 Game - Part 10</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>

<body style="background-color: #008000;">

    <script type="text/javascript">
        class Example extends Phaser.Scene {
            preload() {
                this.load.image('grass-tiles', 'assets/Grass.png');
                this.load.spritesheet('player', 'assets/cat.png', { frameWidth: 16, frameHeight: 16 });
                this.load.tilemapCSV('map', 'assets/level.csv');
                
            }

            create() {

                const map = this.add.tilemap('map', 16, 16);

                const tiles = map.addTilesetImage('grass-tiles');

                this.cameras.main.setBackgroundColor('#008000');


                const layer = map.createLayer(0, tiles, 0, 0);
                layer.setCollision([30, 61, 64, 65, 74, 75]);


                // Create the player sprite
                player = this.physics.add.sprite(6 * 16 / 2, 6 * 16 / 2, 'player');
                player.setCollideWorldBounds(true);

                this.physics.add.collider(player, layer);

                cursors = this.input.keyboard.createCursorKeys();

            }

            update() {

                if (cursors.left.isDown) {
                    player.setVelocityX(-160);
                } else if (cursors.right.isDown) {
                    player.setVelocityX(160);
                } else if (cursors.up.isDown) {
                    player.setVelocityY(-160);
                } else if (cursors.down.isDown) {
                    player.setVelocityY(160);
                } else {
                    player.setVelocity(0);
                }
            }

        }

        const config = {
            type: Phaser.AUTO,
            width: 14 * 16, // Number of tiles * size of the tile
            height: 10 * 16,
            zoom: 1,
            parent: 'phaser-example',
            pixelArt: true,
            scene: Example,
            scale: {
                mode: Phaser.Scale.FIT,
                autoCenter: Phaser.Scale.CENTER_BOTH,
            },
            physics: {
                default: 'arcade',
                arcade: {
                    gravity: { y: 0}, // No gravity in this example
                    debug: true // Set it to true if you want to visualize the collision boundaries
                }
            }
        };

        var cursors;
        var player;
        const game = new Phaser.Game(config);


    </script>

</body>

</html>